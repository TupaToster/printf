     1                                  ; (c) Ded, 2012
     2                                  
     3                                  section .data
     4 00000000 6D6174622076206B61-     msg:    db      "matb v kanave", 10d, 0
     4 00000009 6E6176650A00       
     5 0000000F 257300                  fmt:    db      "%s", 0
     6                                  
     7                                  section .text
     8                                          extern printf
     9                                          global main
    10                                  
    11                                  main:
    12 00000000 55                                      push rbp
    13 00000001 4889E5                                  mov rbp, rsp
    14                                  
    15 00000004 68[0F000000]                            push qword fmt
    16 00000009 68[00000000]                            push qword msg
    17 0000000E E8(00000000)                            call printf
    18 00000013 4883C410                                add rsp, 16
    19                                  
    20 00000017 4889EC                                  mov rsp, rbp
    21 0000001A 5D                                      pop rbp
    22 0000001B C3                                      ret
    23                                                  ; push rbp
    24                                  
    25                                                  ; mov rdi, fmt
    26                                                  ; mov rsi, msg
    27                                                  ; xor rax, rax
    28                                                  ; call printf
    29                                  
    30                                                  ; pop rbp
    31                                  
    32                                                  ; xor rax, rax
    33                                  
    34                                                  ; ret
    35                                  
    36                                  ; ----------------------------
    37                                  ; Calculates len of null-term string and puts it to rax
    38                                  ; ----------------------------
    39                                  ; Needs:          rax - string offset
    40                                  
    41                                  ; Exit:           rcx - strlen
    42                                  
    43                                  ; Expects:        none
    44                                  
    45                                  ; Destroys:       rax, rcx
    46                                  ; ============================
    47 0000001C 4831D2                  StrLen:         xor rdx, rdx
    48 0000001F 803800                  .next:          cmp BYTE [rax], 0x00
    49 00000022 7408                                    je .break
    50 00000024 48FFC2                                  inc rdx
    51 00000027 48FFC0                                  inc rax
    52 0000002A EBF3                                    jmp .next
    53 0000002C C3                      .break:         ret
    54                                  
